/*!
* Leaflet.TileLayer.Swiss v2.3.0
* Plugin for displaying Swiss map tiles
* © Roman Karavia | MIT License
* leaflet-tilelayer-swiss.karavia.ch
*/
"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var a=t(require("leaflet"));function n(t){if(!Array.isArray(t))throw new Error("Expected input to be an array.");if(t.length<2)throw new Error("Expected input to be an array with length >= 2, got "+t.length+".");if(t.some((function(t){return!Number.isFinite(t)})))throw new Error("Expected all coordinates to be finite numbers.")}function e(t,a,n){return(n/60+a)/60+t}function i(t){return 180*t/Math.PI}function o(t){return t*Math.PI/180}function r(t,a){return{apply:function(n){var e=n[0],i=n[1],o=n.slice(2);return[e+t,i+a].concat(o)},unapply:function(n){var e=n[0],i=n[1],o=n.slice(2);return[e-t,i-a].concat(o)}}}void 0===Number.isFinite&&(Number.isFinite=function(t){return"number"==typeof t&&isFinite(t)});var s=r(6e5,2e5),h=s.apply,u=s.unapply,l=r(26e5,12e5),c=l.apply,M=l.unapply;function f(t,a){var n=1/a,e=2*n-Math.pow(n,2);return{fromCartesian:function(a){var n,o,r,s,h,u=a[0],l=a[1],c=a[2],M=Math.atan(l/u),f=Math.sqrt(Math.pow(u,2)+Math.pow(l,2)),p=Math.atan(c/((1-e)*f));do{n=o,r=s,s=t/Math.sqrt(1-e*Math.pow(Math.sin(p),2)),h=f/Math.cos(p)-s,p=Math.atan(c/((1-e*s/(s+h))*f)),o=Math.abs(s-r)}while(isNaN(n)||o<n);var d=i(p);return[i(M),d,h]},toCartesian:function(a){var n=a[0],i=a[2],r=void 0===i?0:i,s=o(a[1]),h=o(n),u=t/Math.sqrt(1-e*Math.pow(Math.sin(s),2));return[(u+r)*Math.cos(s)*Math.cos(h),(u+r)*Math.cos(s)*Math.sin(h),(u*(1-e)+r)*Math.sin(s)]}}}var p=f(6377397.155,299.15281285),d=p.fromCartesian,m=p.toCartesian,v=f(6378137,298.257223563),g=v.fromCartesian,w=v.toCartesian,b=1/299.15281285,y=o(e(46,57,8.66)),j=o(e(7,26,22.5)),x=2*b-Math.pow(b,2),P=6377397.155*Math.sqrt(1-x)/(1-x*Math.pow(Math.sin(y),2)),S=Math.sqrt(1+x/(1-x)*Math.pow(Math.cos(y),4)),E=Math.asin(Math.sin(y)/S),I=Math.sqrt(x),z=Math.log(Math.tan(Math.PI/4+E/2))-S*Math.log(Math.tan(Math.PI/4+y/2))+S*I/2*Math.log((1+I*Math.sin(y))/(1-I*Math.sin(y)));function C(t){var a,n=[(a=w(t))[0]-674.374,a[1]-15.056,a[2]-405.346],e=d(n),i=function(t){var a=t[0],n=o(t[1]),e=o(a),i=S*Math.log(Math.tan(Math.PI/4+n/2))-S*I/2*Math.log((1+I*Math.sin(n))/(1-I*Math.sin(n)))+z,r=2*(Math.atan(Math.exp(i))-Math.PI/4),s=S*(e-j),h=Math.asin(Math.cos(E)*Math.sin(r)-Math.sin(E)*Math.cos(r)*Math.cos(s)),u=Math.atan(Math.sin(s)/(Math.sin(E)*Math.tan(r)+Math.cos(E)*Math.cos(s)));return[P*u,P/2*Math.log((1+Math.sin(h))/(1-Math.sin(h)))]}(e);return t.length>2?[].concat(i,[e[2]]):i}function L(t){var a=function(t){var a,n,e,o,r=t[0],s=2*(Math.atan(Math.exp(t[1]/P))-Math.PI/4),h=r/P,u=Math.asin(Math.cos(E)*Math.sin(s)+Math.sin(E)*Math.cos(s)*Math.cos(h)),l=Math.atan(Math.sin(h)/(Math.cos(E)*Math.cos(h)-Math.sin(E)*Math.tan(s))),c=j+l/S,M=u;do{a=n,e=o,o=(Math.log(Math.tan(Math.PI/4+u/2))-z)/S+I*Math.log(Math.tan(Math.PI/4+Math.asin(I*Math.sin(M))/2)),M=2*Math.atan(Math.exp(o))-Math.PI/2,n=Math.abs(o-e)}while(isNaN(a)||n<a);var f=i(M);return[i(c),f]}(t);a.push(t[2]);var n,e=[(n=m(a))[0]+674.374,n[1]+15.056,n[2]+405.346],o=g(e);return t.length>2?o:o.slice(0,2)}var N={__proto__:null,project:function(t){return n(t),h(C(t))},unproject:function(t){return n(t),L(u(t))}};var _={__proto__:null,project:function(t){return n(t),c(C(t))},unproject:function(t){return n(t),L(M(t))}},q=a.default.bounds([42e4,3e4],[9e5,35e4]),B=a.default.bounds([242e4,103e4],[29e5,135e4]);function G(t,n){return{bounds:n,project:function(n){var e=n.lng,i=n.lat,o=t.project([e,i]),r=o[0],s=o[1];return a.default.point(r,s)},unproject:function(n){var e=n.x,i=n.y,o=t.unproject([e,i]),r=o[0],s=o[1];return a.default.latLng(s,r)}}}var T=G(N,q),k=G(_,B),A=[4e3,3750,3500,3250,3e3,2750,2500,2250,2e3,1750,1500,1250,1e3,750,650,500,250,100,50,20,10,5,2.5,2,1.5,1,.5,.25,.1];var F=a.default.Class.extend({includes:a.default.CRS,initialize:function(t){this.code=t.code,this.projection=t.projection;var n=this.projection.bounds.getBottomLeft();this.transformation=new a.default.Transformation(1,-n.x,-1,n.y),this.infinite=!1},scale:function(t){return 1/function(t){if(t<0)return A[0];if(t>A.length-1)return A[A.length-1];var a=Math.floor(t);if(a===t)return A[t];var n=A[a],e=A[a+1]/n;return n*Math.pow(e,t-a)}(t)},zoom:function(t){return function(t){for(var a=-1,n=0;n<A.length;n+=1)if(t>=A[n]){a=n;break}if(0===a)return 0;if(-1===a)return A.length-1;if(A[a]===t)return a;var e=A[a-1],i=A[a];return a+Math.log(i/t)/Math.log(e/i)}(1/t)},distance:function(t,a){var n=this.project(t),e=this.project(a);return n.distanceTo(e)}}),R=new F({code:"EPSG:21781",projection:T}),Z=new F({code:"EPSG:2056",projection:k}),H=a.default.latLngBounds(Z.unproject(Z.projection.bounds.min),Z.unproject(Z.projection.bounds.max)),O=a.default.latLngBounds(Z.unproject(a.default.point(2485e3,1075e3)),Z.unproject(a.default.point(2835e3,1295e3))),D={"EPSG:21781":"https://wmts{s}.geo.admin.ch/1.0.0/{layer}/default/{timestamp}/21781/{z}/{y}/{x}.{format}","EPSG:2056":"https://wmts{s}.geo.admin.ch/1.0.0/{layer}/default/{timestamp}/2056/{z}/{x}/{y}.{format}"},J=a.default.TileLayer.extend({options:{attribution:'© <a href="https://www.swisstopo.ch/">Swisstopo</a>',bounds:H,crs:Z,format:"jpeg",layer:"ch.swisstopo.pixelkarte-farbe",minZoom:14,maxNativeZoom:27,maxZoom:28,pluginAttribution:!0,subdomains:"0123456789",timestamp:"current"},initialize:function(t){a.default.setOptions(this,t);var n=this.options.url||D[this.options.crs.code];this.options.attribution&&this.options.pluginAttribution&&(this.options.attribution+=' <a href="https://leaflet-tilelayer-swiss.karavia.ch/" title="Plugin for displaying national maps of Switzerland"><svg aria-hidden="true" viewBox="0 0 32 32" style="display:inline;vertical-align:baseline;width:0.8333em;height:0.8333em;margin-bottom:-0.0833em"><path d="m0 0h32v32h-32z" fill="#f00"/><path d="m13 6h6v7h7v6h-7v7h-6v-7h-7v-6h7z" fill="#fff"/></svg></a>'),a.default.TileLayer.prototype.initialize.call(this,n,this.options)}});a.default.CRS.EPSG21781=R,a.default.CRS.EPSG2056=Z,a.default.TileLayer.Swiss=J,a.default.tileLayer.swiss=function(t){return new J(t)},a.default.Map.addInitHook((function(){this.options.maxBounds||this.options.crs!==R&&this.options.crs!==Z||this.setMaxBounds(H)})),a.default.Map.include({fitSwitzerland:function(){this.fitBounds(O)}}),module.exports=J;
//# sourceMappingURL=Leaflet.TileLayer.Swiss.cjs.js.map

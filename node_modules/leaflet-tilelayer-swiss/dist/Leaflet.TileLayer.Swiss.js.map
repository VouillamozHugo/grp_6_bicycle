{"version":3,"file":"Leaflet.TileLayer.Swiss.js","sources":["../node_modules/swissgrid/dist/swissgrid.mjs","../src/index.js"],"sourcesContent":["var t=Math.sqrt(Number.EPSILON);function a(t){return t/60/60}function n(t,a,n){return(n/60+a)/60+t}function h(t){return 60*t*60}function M(t){return 180*t/Math.PI}function r(t){return t*Math.PI/180}function o(t){var a=t[0],n=t[2],M=(h(t[1])-169028.66)/1e4,r=(h(a)-26782.5)/1e4,o=72.37+211455.93*r-10938.51*r*M-.36*r*Math.pow(M,2)-44.54*Math.pow(r,3),s=147.07+308807.95*M+3745.25*Math.pow(r,2)+76.63*Math.pow(M,2)-194.56*Math.pow(r,2)*M+119.79*Math.pow(M,3);return void 0===n?[o,s]:[o,s,n-49.55+2.73*r+6.94*M]}function s(t){var n=t[2],h=t[0]/1e6,M=t[1]/1e6,r=2.6779094+4.728982*h+.791484*h*M+.1306*h*Math.pow(M,2)-.0436*Math.pow(h,3),o=1e4*(16.9023892+3.238272*M-.270978*Math.pow(h,2)-.002528*Math.pow(M,2)-.0447*Math.pow(h,2)*M-.014*Math.pow(M,3)),s=a(1e4*r),e=a(o);return void 0===n?[s,e]:[s,e,n+49.55-12.6*h-22.64*M]}function e(t,a){return{apply:function(n){var h=n[0],M=n[1],r=n.slice(2);return[h+t,M+a].concat(r)},unapply:function(n){var h=n[0],M=n[1],r=n.slice(2);return[h-t,M-a].concat(r)}}}var i=e(6e5,2e5),c=i.apply,u=i.unapply;var p={project:function(t){return c(o(t))},unproject:function(t){return s(u(t))}},f=e(26e5,12e5),v=f.apply,l=f.unapply;function w(t){return v(o(t))}function j(t){return s(l(t))}var I={lv03:p,lv95:{project:w,unproject:j},project:w,unproject:j},P=674.374,g=15.056,q=405.346;function y(a,n){var h=1/n,o=2*h-Math.pow(h,2);return{fromCartesian:function(n){for(var h,r,s,e=n[0],i=n[1],c=n[2],u=Math.atan(i/e),p=Math.sqrt(Math.pow(e,2)+Math.pow(i,2)),f=Math.atan(c/((1-o)*p));!(Math.abs(r-h)<t);)h=r,r=a/Math.sqrt(1-o*Math.pow(Math.sin(f),2)),s=p/Math.cos(f)-r,f=Math.atan(c/((1-o*r/(r+s))*p));var v=M(f);return[M(u),v,s]},toCartesian:function(t){var n=t[0],h=t[2];void 0===h&&(h=0);var M=r(t[1]),s=r(n),e=a/Math.sqrt(1-o*Math.pow(Math.sin(M),2));return[(e+h)*Math.cos(M)*Math.cos(s),(e+h)*Math.cos(M)*Math.sin(s),(e*(1-o)+h)*Math.sin(M)]}}}var C=6377397.155,m=6356078.96282,x=y(C,299.15281282542253),b=x.fromCartesian,d=x.toCartesian,N=y(6378137,298.257223563),E=N.fromCartesian,L=N.toCartesian,O=C,S=(O-m)/O,k=r(n(46,57,8.66)),z=r(n(7,26,22.5)),A=2*S-Math.pow(S,2),B=O*Math.sqrt(1-A)/(1-A*Math.pow(Math.sin(k),2)),D=Math.sqrt(1+A/(1-A)*Math.pow(Math.cos(k),4)),F=Math.asin(Math.sin(k)/D),G=Math.sqrt(A),H=Math.log(Math.tan(Math.PI/4+F/2))-D*Math.log(Math.tan(Math.PI/4+k/2))+D*G/2*Math.log((1+G*Math.sin(k))/(1-G*Math.sin(k)));function J(t){var a,n=L(t),h=[(a=n)[0]-P,a[1]-g,a[2]-q],M=b(h),o=function(t){var a=t[0],n=r(t[1]),h=r(a),M=D*Math.log(Math.tan(Math.PI/4+n/2))-D*G/2*Math.log((1+G*Math.sin(n))/(1-G*Math.sin(n)))+H,o=2*(Math.atan(Math.exp(M))-Math.PI/4),s=D*(h-z),e=Math.asin(Math.cos(F)*Math.sin(o)-Math.sin(F)*Math.cos(o)*Math.cos(s)),i=Math.atan(Math.sin(s)/(Math.sin(F)*Math.tan(o)+Math.cos(F)*Math.cos(s)));return[B*i,B/2*Math.log((1+Math.sin(e))/(1-Math.sin(e)))]}(M);return t.length>2?o.concat([M[2]]):o}function K(a){var n=function(a){for(var n,h,r=a[0],o=2*(Math.atan(Math.exp(a[1]/B))-Math.PI/4),s=r/B,e=Math.asin(Math.cos(F)*Math.sin(o)+Math.sin(F)*Math.cos(o)*Math.cos(s)),i=Math.atan(Math.sin(s)/(Math.cos(F)*Math.cos(s)-Math.sin(F)*Math.tan(o))),c=z+i/D,u=e;!(Math.abs(h-n)<t);)n=h,h=(Math.log(Math.tan(Math.PI/4+e/2))-H)/D+G*Math.log(Math.tan(Math.PI/4+Math.asin(G*Math.sin(u))/2)),u=2*Math.atan(Math.exp(h))-Math.PI/2;var p=M(u);return[M(c),p]}(a);n.push(a[2]);var h,r=d(n),o=[(h=r)[0]+P,h[1]+g,h[2]+q],s=E(o);return a.length>2?s:s.slice(0,2)}var Q={project:function(t){return c(J(t))},unproject:function(t){return K(u(t))}};function R(t){return v(J(t))}function T(t){return K(l(t))}var U={project:R,unproject:T},V=R,W=T;export{I as fast,Q as lv03,U as lv95,V as project,W as unproject};\n//# sourceMappingURL=swissgrid.mjs.map\n","import L from 'leaflet';\nimport { lv03, lv95 } from 'swissgrid';\n\nconst Projection = {\n  bounds: L.bounds(L.point(2420000, 1030000), L.point(2900000, 1350000)),\n  project: ({ lng, lat }) => {\n    const [E, N] = lv95.project([lng, lat]);\n    return L.point(E, N);\n  },\n  unproject: ({ x: E, y: N }) => {\n    const [lng, lat] = lv95.unproject([E, N]);\n    return L.latLng(lat, lng);\n  },\n};\n\nconst CRS = L.Class.extend({\n  includes: L.CRS,\n\n  options: {\n    transformation: new L.Transformation(1, 0, -1, 0),\n  },\n\n  initialize(options) {\n    this.projection = Projection;\n\n    L.setOptions(this, options);\n\n    if (this.options.origin) {\n      this.transformation = new L.Transformation(1, -this.options.origin[0], -1, this.options.origin[1]);\n    }\n\n    if (this.options.scales) {\n      this._scales = this.options.scales;\n    } else if (this.options.resolutions) {\n      this._scales = [];\n      for (let i = this.options.resolutions.length - 1; i >= 0; i--) {\n        if (this.options.resolutions[i]) {\n          this._scales[i] = 1 / this.options.resolutions[i];\n        }\n      }\n    }\n\n    this.infinite = !this.options.bounds;\n  },\n\n  scale(zoom) {\n    const iZoom = Math.floor(zoom);\n    if (zoom === iZoom) {\n      return this._scales[zoom];\n    }\n    // Non-integer zoom, interpolate\n    const baseScale = this._scales[iZoom];\n    const nextScale = this._scales[iZoom + 1];\n    const scaleDiff = nextScale - baseScale;\n    const zDiff = (zoom - iZoom);\n    return baseScale + scaleDiff * zDiff;\n  },\n\n  zoom(scale) {\n    // Find closest number in this._scales, down\n    const downScale = this._closestElement(this._scales, scale);\n    const downZoom = this._scales.indexOf(downScale);\n    // Check if scale is downScale => return array index\n    if (scale === downScale) {\n      return downZoom;\n    }\n    if (downScale === undefined) {\n      return -Infinity;\n    }\n    // Interpolate\n    const nextZoom = downZoom + 1;\n    const nextScale = this._scales[nextZoom];\n    if (nextScale === undefined) {\n      return Infinity;\n    }\n    const scaleDiff = nextScale - downScale;\n    return (scale - downScale) / scaleDiff + downZoom;\n  },\n\n  distance: L.CRS.Earth.distance,\n\n  R: L.CRS.Earth.R,\n\n  /* Get the closest lowest element in an array */\n  _closestElement(array, element) {\n    let low;\n    for (let i = array.length; i--;) {\n      if (array[i] <= element && (low === undefined || low < array[i])) {\n        low = array[i];\n      }\n    }\n    return low;\n  },\n});\n\n// Available resolutions\n// Source: https://api3.geo.admin.ch/services/sdiservices.html#wmts\nconst resolutions = [\n  4000, 3750, 3500, 3250, 3000, 2750, 2500, 2250, 2000, 1750, 1500, 1250, 1000,\n  750, 650, 500, 250, 100, 50, 20, 10, 5, 2.5, 2, 1.5, 1, 0.5, 0.25, 0.1,\n];\n\nfunction makeCrs(options) {\n  const bounds = L.bounds(options.min, options.max);\n  const origin = [options.min.x, options.max.y];\n  return new CRS({\n    bounds,\n    origin,\n    resolutions,\n  });\n}\n\nconst EPSG_2056 = makeCrs({\n  // Bounding box for tiles in EPSG:2056\n  // Source: https://wmts.geo.admin.ch/EPSG/2056/1.0.0/WMTSCapabilities.xml\n  min: L.point(2420000, 1030000),\n  max: L.point(2900000, 1350000),\n});\nconst project2056 = latLng => EPSG_2056.projection.project(latLng);\nconst unproject2056 = point => EPSG_2056.projection.unproject(point);\n\n/*\nconst EPSG_21781 = makeCrs({\n  // Bounding box for tiles in EPSG:21781\n  // Source: https://wmts.geo.admin.ch/EPSG/21781/1.0.0/WMTSCapabilities.xml\n  min: L.point(420000, 30000),\n  max: L.point(900000, 350000),\n});\nconst project21781 = latLng => EPSG_21781.projection.project(latLng);\nconst unproject21781 = point => EPSG_21781.projection.unproject(point);\n*/\n\nconst latLngBounds = L.latLngBounds(\n  unproject2056(EPSG_2056.options.bounds.min),\n  unproject2056(EPSG_2056.options.bounds.max),\n);\n\nconst URLS = {\n  'EPSG:2056': 'https://wmts{s}.geo.admin.ch/1.0.0/{layer}/default/{timestamp}/2056/{z}/{x}/{y}.{format}',\n  'EPSG:21781': 'https://wmts{s}.geo.admin.ch/1.0.0/{layer}/default/{timestamp}/21781/{z}/{y}/{x}.{format}',\n};\n\nconst Swiss = L.TileLayer.extend({\n  options: {\n    attribution: '<a href=\"https://www.swisstopo.admin.ch/en/home.html\" target=\"_blank\">swisstopo</a>',\n    bounds: latLngBounds,\n    crs: EPSG_2056,\n    format: 'jpeg',\n    layer: 'ch.swisstopo.pixelkarte-farbe',\n    maxZoom: 27,\n    minZoom: 0,\n    subdomains: '0123456789',\n    timestamp: 'current',\n  },\n  initialize(options) {\n    L.setOptions(this, options);\n    const url = URLS['EPSG:2056'];\n    L.TileLayer.prototype.initialize.call(this, url, this.options);\n  },\n});\n\nSwiss.latLngBounds = latLngBounds;\nSwiss.EPSG_2056 = EPSG_2056;\nSwiss.project_2056 = project2056;\nSwiss.unproject_2056 = unproject2056;\n/*\nSwiss.EPSG_21781 = EPSG_21781;\nSwiss.project_21781 = project21781;\nSwiss.unproject_21781 = unproject21781;\n*/\n\nL.tileLayer.swiss = options => new Swiss(options);\n\nexport default Swiss;\n"],"names":["L","const","Projection","bounds","point","project","lat","lv95","lng","E","N","unproject","latLng","CRS","Class","extend","includes","options","transformation","Transformation","initialize","projection","setOptions","origin","scales","_scales","resolutions","let","i","length","infinite","scale","zoom","iZoom","Math","floor","baseScale","nextScale","scaleDiff","zDiff","downScale","_closestElement","downZoom","indexOf","undefined","Infinity","nextZoom","distance","Earth","R","array","element","low","makeCrs","min","max","x","y","EPSG_2056","project2056","unproject2056","latLngBounds","URLS","Swiss","TileLayer","attribution","crs","format","layer","maxZoom","minZoom","subdomains","timestamp","url","prototype","call","project_2056","unproject_2056","tileLayer","swiss"],"mappings":";;;;AAAA,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,AAA6B,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,AAA6B,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,AAA6mB,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAM,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,OAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,OAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,AAA0C,IAA+E,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAA8D,IAA+D,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAM,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAM,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,aAAa,CAACA,GAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAACA,GAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,OAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC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"}
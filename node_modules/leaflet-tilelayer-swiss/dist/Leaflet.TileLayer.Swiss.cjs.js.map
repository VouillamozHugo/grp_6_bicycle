{"version":3,"file":"Leaflet.TileLayer.Swiss.cjs.js","sources":["../node_modules/swissgrid/dist/swissgrid.mjs","../src/projection.js","../src/resolution.js","../src/crs.js","../src/epsg.js","../src/bounds.js","../src/layer.js","../src/index.js"],"sourcesContent":["function t(t){return t/60/60}function a(t){if(!Array.isArray(t))throw new Error(\"Expected input to be an array.\");if(t.length<2)throw new Error(\"Expected input to be an array with length >= 2, got \"+t.length+\".\");if(t.some(function(t){return!Number.isFinite(t)}))throw new Error(\"Expected all coordinates to be finite numbers.\")}function n(t,a,n){return(n/60+a)/60+t}function r(t){return 60*t*60}function o(t){return 180*t/Math.PI}function h(t){return t*Math.PI/180}function M(t){var a=t[0],n=t[2],o=(r(t[1])-169028.66)/1e4,h=(r(a)-26782.5)/1e4,M=72.37+211455.93*h-10938.51*h*o-.36*h*Math.pow(o,2)-44.54*Math.pow(h,3),e=147.07+308807.95*o+3745.25*Math.pow(h,2)+76.63*Math.pow(o,2)-194.56*Math.pow(h,2)*o+119.79*Math.pow(o,3);return void 0===n?[M,e]:[M,e,n-49.55+2.73*h+6.94*o]}function e(a){var n=a[2],r=a[0]/1e6,o=a[1]/1e6,h=2.6779094+4.728982*r+.791484*r*o+.1306*r*Math.pow(o,2)-.0436*Math.pow(r,3),M=1e4*(16.9023892+3.238272*o-.270978*Math.pow(r,2)-.002528*Math.pow(o,2)-.0447*Math.pow(r,2)*o-.014*Math.pow(o,3)),e=t(1e4*h),i=t(M);return void 0===n?[e,i]:[e,i,n+49.55-12.6*r-22.64*o]}function i(t,a){return{apply:function(n){var r=n[0],o=n[1],h=n.slice(2);return[r+t,o+a].concat(h)},unapply:function(n){var r=n[0],o=n[1],h=n.slice(2);return[r-t,o-a].concat(h)}}}void 0===Number.isFinite&&(Number.isFinite=function(t){return\"number\"==typeof t&&isFinite(t)});var u=i(6e5,2e5),s=u.apply,c=u.unapply,p={__proto__:null,project:function(t){return a(t),s(M(t))},unproject:function(t){return a(t),e(c(t))}},l=i(26e5,12e5),f=l.apply,w=l.unapply;function v(t){return a(t),f(M(t))}function _(t){return a(t),e(w(t))}var g={__proto__:null,lv03:p,lv95:{__proto__:null,project:v,unproject:_},project:v,unproject:_};function j(t,a){var n=1/a,r=2*n-Math.pow(n,2);return{fromCartesian:function(a){var n,h,M,e,i,u=a[0],s=a[1],c=a[2],p=Math.atan(s/u),l=Math.sqrt(Math.pow(u,2)+Math.pow(s,2)),f=Math.atan(c/((1-r)*l));do{n=h,M=e,e=t/Math.sqrt(1-r*Math.pow(Math.sin(f),2)),i=l/Math.cos(f)-e,f=Math.atan(c/((1-r*e/(e+i))*l)),h=Math.abs(e-M)}while(isNaN(n)||h<n);var w=o(f);return[o(p),w,i]},toCartesian:function(a){var n=a[0],o=a[2],M=void 0===o?0:o,e=h(a[1]),i=h(n),u=t/Math.sqrt(1-r*Math.pow(Math.sin(e),2));return[(u+M)*Math.cos(e)*Math.cos(i),(u+M)*Math.cos(e)*Math.sin(i),(u*(1-r)+M)*Math.sin(e)]}}}var y=j(6377397.155,299.15281285),b=y.fromCartesian,d=y.toCartesian,I=j(6378137,298.257223563),P=I.fromCartesian,m=I.toCartesian,x=1/299.15281285,N=h(n(46,57,8.66)),q=h(n(7,26,22.5)),C=2*x-Math.pow(x,2),E=6377397.155*Math.sqrt(1-C)/(1-C*Math.pow(Math.sin(N),2)),F=Math.sqrt(1+C/(1-C)*Math.pow(Math.cos(N),4)),A=Math.asin(Math.sin(N)/F),k=Math.sqrt(C),z=Math.log(Math.tan(Math.PI/4+A/2))-F*Math.log(Math.tan(Math.PI/4+N/2))+F*k/2*Math.log((1+k*Math.sin(N))/(1-k*Math.sin(N)));function B(t){var a,n=[(a=m(t))[0]-674.374,a[1]-15.056,a[2]-405.346],r=b(n),o=function(t){var a=t[0],n=h(t[1]),r=h(a),o=F*Math.log(Math.tan(Math.PI/4+n/2))-F*k/2*Math.log((1+k*Math.sin(n))/(1-k*Math.sin(n)))+z,M=2*(Math.atan(Math.exp(o))-Math.PI/4),e=F*(r-q),i=Math.asin(Math.cos(A)*Math.sin(M)-Math.sin(A)*Math.cos(M)*Math.cos(e)),u=Math.atan(Math.sin(e)/(Math.sin(A)*Math.tan(M)+Math.cos(A)*Math.cos(e)));return[E*u,E/2*Math.log((1+Math.sin(i))/(1-Math.sin(i)))]}(r);return t.length>2?[].concat(o,[r[2]]):o}function D(t){var a=function(t){var a,n,r,h,M=t[0],e=2*(Math.atan(Math.exp(t[1]/E))-Math.PI/4),i=M/E,u=Math.asin(Math.cos(A)*Math.sin(e)+Math.sin(A)*Math.cos(e)*Math.cos(i)),s=Math.atan(Math.sin(i)/(Math.cos(A)*Math.cos(i)-Math.sin(A)*Math.tan(e))),c=q+s/F,p=u;do{a=n,r=h,h=(Math.log(Math.tan(Math.PI/4+u/2))-z)/F+k*Math.log(Math.tan(Math.PI/4+Math.asin(k*Math.sin(p))/2)),p=2*Math.atan(Math.exp(h))-Math.PI/2,n=Math.abs(h-r)}while(isNaN(a)||n<a);var l=o(p);return[o(c),l]}(t);a.push(t[2]);var n,r=[(n=d(a))[0]+674.374,n[1]+15.056,n[2]+405.346],h=P(r);return t.length>2?h:h.slice(0,2)}var G={__proto__:null,project:function(t){return a(t),s(B(t))},unproject:function(t){return a(t),D(c(t))}};function H(t){return a(t),f(B(t))}function J(t){return a(t),D(w(t))}var K={__proto__:null,project:H,unproject:J},L=H,O=J;export{g as fast,G as lv03,K as lv95,L as project,O as unproject};\n//# sourceMappingURL=swissgrid.mjs.map\n","import L from 'leaflet';\nimport * as swissgrid from 'swissgrid';\n\n// Bounding box for tiles in LV03\n// Source: https://wmts.geo.admin.ch/EPSG/21781/1.0.0/WMTSCapabilities.xml\nconst LV03_BOUNDS = L.bounds(\n  [420000, 30000],\n  [900000, 350000],\n);\n\n// Bounding box for tiles in LV95\n// Source: https://wmts.geo.admin.ch/EPSG/2056/1.0.0/WMTSCapabilities.xml\nconst LV95_BOUNDS = L.bounds(\n  [2420000, 1030000],\n  [2900000, 1350000],\n);\n\nfunction leafletProjection(swissgridProjection, bounds) {\n  return {\n    bounds,\n    project: ({ lng, lat }) => {\n      const [E, N] = swissgridProjection.project([lng, lat]);\n      return L.point(E, N);\n    },\n    unproject: ({ x: E, y: N }) => {\n      const [lng, lat] = swissgridProjection.unproject([E, N]);\n      return L.latLng(lat, lng);\n    },\n  };\n}\n\nexport const lv03 = leafletProjection(swissgrid.lv03, LV03_BOUNDS);\nexport const lv95 = leafletProjection(swissgrid.lv95, LV95_BOUNDS);\n","// Available resolutions\n// Source: https://api3.geo.admin.ch/services/sdiservices.html#wmts\nconst RESOLUTIONS = [\n  4000, 3750, 3500, 3250, 3000, 2750, 2500, 2250, 2000, 1750, 1500, 1250, 1000,\n  750, 650, 500, 250, 100, 50, 20, 10, 5, 2.5, 2, 1.5, 1, 0.5, 0.25, 0.1,\n];\n\nexport function fromZoom(zoom) {\n  if (zoom < 0) {\n    return RESOLUTIONS[0];\n  }\n  if (zoom > RESOLUTIONS.length - 1) {\n    return RESOLUTIONS[RESOLUTIONS.length - 1];\n  }\n  const zoomPrevious = Math.floor(zoom);\n  if (zoomPrevious === zoom) {\n    return RESOLUTIONS[zoom];\n  }\n  const resolutionPrevious = RESOLUTIONS[zoomPrevious];\n  const resolutionNext = RESOLUTIONS[zoomPrevious + 1];\n  const resolutionFactor = resolutionNext / resolutionPrevious;\n  return resolutionPrevious * (resolutionFactor ** (zoom - zoomPrevious));\n}\n\nexport function toZoom(resolution) {\n  let zoomNext = -1;\n  for (let i = 0; i < RESOLUTIONS.length; i += 1) {\n    if (resolution >= RESOLUTIONS[i]) {\n      zoomNext = i;\n      break;\n    }\n  }\n  if (zoomNext === 0) {\n    return 0;\n  }\n  if (zoomNext === -1) {\n    return RESOLUTIONS.length - 1;\n  }\n  if (RESOLUTIONS[zoomNext] === resolution) {\n    return zoomNext;\n  }\n  const resolutionPrevious = RESOLUTIONS[zoomNext - 1];\n  const resolutionNext = RESOLUTIONS[zoomNext];\n  return zoomNext + (\n    Math.log(resolutionNext / resolution) / Math.log(resolutionPrevious / resolutionNext)\n  );\n}\n","import L from 'leaflet';\nimport * as epsg from './epsg';\nimport * as projection from './projection';\nimport * as resolution from './resolution';\n\nconst CRS = L.Class.extend({\n  includes: L.CRS,\n\n  initialize(options) {\n    this.code = options.code;\n    this.projection = options.projection;\n\n    const origin = this.projection.bounds.getBottomLeft();\n    this.transformation = new L.Transformation(1, -origin.x, -1, origin.y);\n    this.infinite = false;\n  },\n\n  scale(zoom) {\n    return 1 / resolution.fromZoom(zoom);\n  },\n\n  zoom(scale) {\n    return resolution.toZoom(1 / scale);\n  },\n\n  distance(latLng1, latLng2) {\n    const point1 = this.project(latLng1);\n    const point2 = this.project(latLng2);\n    return point1.distanceTo(point2);\n  },\n});\n\nexport const lv03 = new CRS({\n  code: epsg.lv03,\n  projection: projection.lv03,\n});\n\nexport const lv95 = new CRS({\n  code: epsg.lv95,\n  projection: projection.lv95,\n});\n","export const lv03 = 'EPSG:21781';\nexport const lv95 = 'EPSG:2056';\n","import L from 'leaflet';\nimport { lv95 } from './crs';\n\n// Areas where tiles are available in lat/lng (same for LV03/LV95)\nexport const tileBounds = L.latLngBounds(\n  lv95.unproject(lv95.projection.bounds.min),\n  lv95.unproject(lv95.projection.bounds.max),\n);\n\n// Approximate bounding box of Switzerland in lat/lng (same for LV03/LV95)\n// This can be used to set the initial map view, such that the entire country is visible\nexport const switzerlandBounds = L.latLngBounds(\n  lv95.unproject(L.point(2485000, 1075000)),\n  lv95.unproject(L.point(2835000, 1295000)),\n);\n","import L from 'leaflet';\nimport { tileBounds } from './bounds';\nimport { lv95 } from './crs';\nimport * as epsg from './epsg';\nimport flag from './flag';\n\nconst urlsByCrs = {\n  [epsg.lv03]: 'https://wmts{s}.geo.admin.ch/1.0.0/{layer}/default/{timestamp}/21781/{z}/{y}/{x}.{format}',\n  [epsg.lv95]: 'https://wmts{s}.geo.admin.ch/1.0.0/{layer}/default/{timestamp}/2056/{z}/{x}/{y}.{format}',\n};\n\nconst pluginAttributionSuffix = ` <a href=\"https://leaflet-tilelayer-swiss.karavia.ch/\" title=\"Plugin for displaying national maps of Switzerland\">${flag}</a>`;\n\nexport default L.TileLayer.extend({\n  options: {\n    attribution: 'Â© <a href=\"https://www.swisstopo.ch/\">Swisstopo</a>',\n    bounds: tileBounds,\n    crs: lv95,\n    format: 'jpeg',\n    layer: 'ch.swisstopo.pixelkarte-farbe',\n    minZoom: 14,\n    maxNativeZoom: 27,\n    maxZoom: 28,\n    pluginAttribution: true,\n    subdomains: '0123456789',\n    timestamp: 'current',\n  },\n  initialize(options) {\n    L.setOptions(this, options);\n    const url = this.options.url || urlsByCrs[this.options.crs.code];\n    if (this.options.attribution && this.options.pluginAttribution) {\n      this.options.attribution += pluginAttributionSuffix;\n    }\n    L.TileLayer.prototype.initialize.call(this, url, this.options);\n  },\n});\n","import L from 'leaflet';\nimport { switzerlandBounds, tileBounds } from './bounds';\nimport { lv03, lv95 } from './crs';\nimport SwissLayer from './layer';\n\nL.CRS.EPSG21781 = lv03;\nL.CRS.EPSG2056 = lv95;\n\nL.TileLayer.Swiss = SwissLayer;\nL.tileLayer.swiss = (options) => new SwissLayer(options);\n\nL.Map.addInitHook(function setMaxBounds() {\n  if (!this.options.maxBounds) {\n    if (this.options.crs === lv03 || this.options.crs === lv95) {\n      // Limit map movement to area where tiles are available\n      this.setMaxBounds(tileBounds);\n    }\n  }\n});\n\nL.Map.include({\n  fitSwitzerland() {\n    // Set the map view, such that the entire country is visible\n    this.fitBounds(switzerlandBounds);\n  },\n});\n\nexport default SwissLayer;\n"],"names":["a","t","Array","isArray","Error","length","some","Number","isFinite","n","o","Math","PI","h","i","apply","r","slice","concat","unapply","u","s","c","l","f","w","j","pow","fromCartesian","M","e","p","atan","sqrt","sin","cos","abs","isNaN","toCartesian","y","b","d","I","P","m","x","N","q","C","E","F","A","asin","k","z","log","tan","B","exp","D","push","G","__proto__","project","unproject","K","LV03_BOUNDS","L","bounds","LV95_BOUNDS","leafletProjection","swissgridProjection","ref","lng","ref$1","lat","point","latLng","const","lv03","swissgrid.lv03","lv95","swissgrid.lv95","RESOLUTIONS","CRS","Class","extend","includes","initialize","options","this","code","projection","origin","getBottomLeft","transformation","Transformation","infinite","scale","zoom","zoomPrevious","floor","resolutionPrevious","resolutionFactor","resolution.fromZoom","resolution","let","zoomNext","resolutionNext","resolution.toZoom","distance","latLng1","latLng2","point1","point2","distanceTo","projection.lv03","projection.lv95","tileBounds","latLngBounds","min","max","switzerlandBounds","urlsByCrs","EPSG:21781","EPSG:2056","SwissLayer","TileLayer","attribution","crs","format","layer","minZoom","maxNativeZoom","maxZoom","pluginAttribution","subdomains","timestamp","setOptions","url","prototype","call","EPSG21781","EPSG2056","Swiss","tileLayer","swiss","Map","addInitHook","maxBounds","setMaxBounds","include","fitSwitzerland","fitBounds"],"mappings":"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"}
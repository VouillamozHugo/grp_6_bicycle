/*!
* Leaflet.TileLayer.Swiss v2.3.0
* Plugin for displaying Swiss map tiles
* © Roman Karavia | MIT License
* leaflet-tilelayer-swiss.karavia.ch
*/
!function(t,a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a(require("leaflet")):"function"==typeof define&&define.amd?define(["leaflet"],a):((t="undefined"!=typeof globalThis?globalThis:t||self).L=t.L||{},t.L.TileLayer=t.L.TileLayer||{},t.L.TileLayer.Swiss=a(t.L))}(this,(function(t){"use strict";function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=a(t),e="EPSG:21781",i="EPSG:2056";function o(t){if(!Array.isArray(t))throw new Error("Expected input to be an array.");if(t.length<2)throw new Error("Expected input to be an array with length >= 2, got "+t.length+".");if(t.some((function(t){return!Number.isFinite(t)})))throw new Error("Expected all coordinates to be finite numbers.")}function r(t,a,n){return(n/60+a)/60+t}function s(t){return 180*t/Math.PI}function h(t){return t*Math.PI/180}function u(t,a){return{apply:function(n){var e=n[0],i=n[1],o=n.slice(2);return[e+t,i+a].concat(o)},unapply:function(n){var e=n[0],i=n[1],o=n.slice(2);return[e-t,i-a].concat(o)}}}void 0===Number.isFinite&&(Number.isFinite=function(t){return"number"==typeof t&&isFinite(t)});var l=u(6e5,2e5),f=l.apply,c=l.unapply,M=u(26e5,12e5),p=M.apply,d=M.unapply;function m(t,a){var n=1/a,e=2*n-Math.pow(n,2);return{fromCartesian:function(a){var n,i,o,r,h,u=a[0],l=a[1],f=a[2],c=Math.atan(l/u),M=Math.sqrt(Math.pow(u,2)+Math.pow(l,2)),p=Math.atan(f/((1-e)*M));do{n=i,o=r,r=t/Math.sqrt(1-e*Math.pow(Math.sin(p),2)),h=M/Math.cos(p)-r,p=Math.atan(f/((1-e*r/(r+h))*M)),i=Math.abs(r-o)}while(isNaN(n)||i<n);var d=s(p);return[s(c),d,h]},toCartesian:function(a){var n=a[0],i=a[2],o=void 0===i?0:i,r=h(a[1]),s=h(n),u=t/Math.sqrt(1-e*Math.pow(Math.sin(r),2));return[(u+o)*Math.cos(r)*Math.cos(s),(u+o)*Math.cos(r)*Math.sin(s),(u*(1-e)+o)*Math.sin(r)]}}}var v=m(6377397.155,299.15281285),g=v.fromCartesian,w=v.toCartesian,y=m(6378137,298.257223563),b=y.fromCartesian,j=y.toCartesian,x=1/299.15281285,L=h(r(46,57,8.66)),P=h(r(7,26,22.5)),S=2*x-Math.pow(x,2),E=6377397.155*Math.sqrt(1-S)/(1-S*Math.pow(Math.sin(L),2)),I=Math.sqrt(1+S/(1-S)*Math.pow(Math.cos(L),4)),z=Math.asin(Math.sin(L)/I),C=Math.sqrt(S),T=Math.log(Math.tan(Math.PI/4+z/2))-I*Math.log(Math.tan(Math.PI/4+L/2))+I*C/2*Math.log((1+C*Math.sin(L))/(1-C*Math.sin(L)));function N(t){var a,n=[(a=j(t))[0]-674.374,a[1]-15.056,a[2]-405.346],e=g(n),i=function(t){var a=t[0],n=h(t[1]),e=h(a),i=I*Math.log(Math.tan(Math.PI/4+n/2))-I*C/2*Math.log((1+C*Math.sin(n))/(1-C*Math.sin(n)))+T,o=2*(Math.atan(Math.exp(i))-Math.PI/4),r=I*(e-P),s=Math.asin(Math.cos(z)*Math.sin(o)-Math.sin(z)*Math.cos(o)*Math.cos(r)),u=Math.atan(Math.sin(r)/(Math.sin(z)*Math.tan(o)+Math.cos(z)*Math.cos(r)));return[E*u,E/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))]}(e);return t.length>2?[].concat(i,[e[2]]):i}function _(t){var a=function(t){var a,n,e,i,o=t[0],r=2*(Math.atan(Math.exp(t[1]/E))-Math.PI/4),h=o/E,u=Math.asin(Math.cos(z)*Math.sin(r)+Math.sin(z)*Math.cos(r)*Math.cos(h)),l=Math.atan(Math.sin(h)/(Math.cos(z)*Math.cos(h)-Math.sin(z)*Math.tan(r))),f=P+l/I,c=u;do{a=n,e=i,i=(Math.log(Math.tan(Math.PI/4+u/2))-T)/I+C*Math.log(Math.tan(Math.PI/4+Math.asin(C*Math.sin(c))/2)),c=2*Math.atan(Math.exp(i))-Math.PI/2,n=Math.abs(i-e)}while(isNaN(a)||n<a);var M=s(c);return[s(f),M]}(t);a.push(t[2]);var n,e=[(n=w(a))[0]+674.374,n[1]+15.056,n[2]+405.346],i=b(e);return t.length>2?i:i.slice(0,2)}var q={__proto__:null,project:function(t){return o(t),f(N(t))},unproject:function(t){return o(t),_(c(t))}};var B={__proto__:null,project:function(t){return o(t),p(N(t))},unproject:function(t){return o(t),_(d(t))}},G=n.default.bounds([42e4,3e4],[9e5,35e4]),k=n.default.bounds([242e4,103e4],[29e5,135e4]);function A(t,a){return{bounds:a,project:function(a){var e=a.lng,i=a.lat,o=t.project([e,i]),r=o[0],s=o[1];return n.default.point(r,s)},unproject:function(a){var e=a.x,i=a.y,o=t.unproject([e,i]),r=o[0],s=o[1];return n.default.latLng(s,r)}}}var F=A(q,G),R=A(B,k),Z=[4e3,3750,3500,3250,3e3,2750,2500,2250,2e3,1750,1500,1250,1e3,750,650,500,250,100,50,20,10,5,2.5,2,1.5,1,.5,.25,.1];var H=n.default.Class.extend({includes:n.default.CRS,initialize:function(t){this.code=t.code,this.projection=t.projection;var a=this.projection.bounds.getBottomLeft();this.transformation=new n.default.Transformation(1,-a.x,-1,a.y),this.infinite=!1},scale:function(t){return 1/function(t){if(t<0)return Z[0];if(t>Z.length-1)return Z[Z.length-1];var a=Math.floor(t);if(a===t)return Z[t];var n=Z[a],e=Z[a+1]/n;return n*Math.pow(e,t-a)}(t)},zoom:function(t){return function(t){for(var a=-1,n=0;n<Z.length;n+=1)if(t>=Z[n]){a=n;break}if(0===a)return 0;if(-1===a)return Z.length-1;if(Z[a]===t)return a;var e=Z[a-1],i=Z[a];return a+Math.log(i/t)/Math.log(e/i)}(1/t)},distance:function(t,a){var n=this.project(t),e=this.project(a);return n.distanceTo(e)}}),O=new H({code:e,projection:F}),D=new H({code:i,projection:R}),J=n.default.latLngBounds(D.unproject(D.projection.bounds.min),D.unproject(D.projection.bounds.max)),K=n.default.latLngBounds(D.unproject(n.default.point(2485e3,1075e3)),D.unproject(n.default.point(2835e3,1295e3))),Q={"EPSG:21781":"https://wmts{s}.geo.admin.ch/1.0.0/{layer}/default/{timestamp}/21781/{z}/{y}/{x}.{format}","EPSG:2056":"https://wmts{s}.geo.admin.ch/1.0.0/{layer}/default/{timestamp}/2056/{z}/{x}/{y}.{format}"},U=n.default.TileLayer.extend({options:{attribution:'© <a href="https://www.swisstopo.ch/">Swisstopo</a>',bounds:J,crs:D,format:"jpeg",layer:"ch.swisstopo.pixelkarte-farbe",minZoom:14,maxNativeZoom:27,maxZoom:28,pluginAttribution:!0,subdomains:"0123456789",timestamp:"current"},initialize:function(t){n.default.setOptions(this,t);var a=this.options.url||Q[this.options.crs.code];this.options.attribution&&this.options.pluginAttribution&&(this.options.attribution+=' <a href="https://leaflet-tilelayer-swiss.karavia.ch/" title="Plugin for displaying national maps of Switzerland"><svg aria-hidden="true" viewBox="0 0 32 32" style="display:inline;vertical-align:baseline;width:0.8333em;height:0.8333em;margin-bottom:-0.0833em"><path d="m0 0h32v32h-32z" fill="#f00"/><path d="m13 6h6v7h7v6h-7v7h-6v-7h-7v-6h7z" fill="#fff"/></svg></a>'),n.default.TileLayer.prototype.initialize.call(this,a,this.options)}});return n.default.CRS.EPSG21781=O,n.default.CRS.EPSG2056=D,n.default.TileLayer.Swiss=U,n.default.tileLayer.swiss=function(t){return new U(t)},n.default.Map.addInitHook((function(){this.options.maxBounds||this.options.crs!==O&&this.options.crs!==D||this.setMaxBounds(J)})),n.default.Map.include({fitSwitzerland:function(){this.fitBounds(K)}}),U}));
//# sourceMappingURL=Leaflet.TileLayer.Swiss.umd.js.map
